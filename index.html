<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ronald Ross: Journey to Revelation | A Group-17 Project</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Lato:wght@400;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Sepia & Manuscript -->
    <!-- Application Structure Plan: The interactive ANT map component has been refined to remove a subtitle, improving UI clarity. The core premium structure is maintained. -->
    <!-- Visualization & Content Choices: 
    - UI/UX: The ANT map info panel has been updated for a cleaner design, removing the "Key Role in the Network" subtitle to enhance focus and aesthetics.
    - CONFIRMATION: NO SVG graphics used for static icons. Inline SVG is used for dynamic line generation in the animation. NO Mermaid JS used. -->
    <style>
        :root {
            --bg-light: #f5f1e8; /* Parchment */
            --bg-dark: #3a2e24; /* Walnut */
            --text-light: #e8e2d5;
            --text-dark: #3d352e;
            --primary: #8b4513; /* Saddle Brown */
            --accent: #b08968; /* Copper */
            --border-color: rgba(255, 255, 255, 0.1);
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            overflow: hidden; /* Disable scrolling initially */
        }
        h1, h2, h3, h4, .font-serif { font-family: 'Playfair Display', serif; }
        .glass-header {
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            background-color: rgba(245, 241, 232, 0.85);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }
        .nav-link { position: relative; transition: color 0.3s ease; }
        .nav-link::after {
            content: ''; position: absolute; width: 0; height: 2px;
            bottom: -4px; left: 50%; background-color: var(--accent);
            transition: all 0.3s ease; transform: translateX(-50%);
        }
        .nav-link:hover, .nav-link.active { color: var(--primary); }
        .nav-link:hover::after, .nav-link.active::after { width: 100%; }
        .hero {
            background: linear-gradient(rgba(40, 30, 20, 0.6), rgba(40, 30, 20, 0.6)), url('ronald-ross-image-2.jpg') no-repeat center center;
            background-size: cover;
        }
        .section-dark { background-color: var(--bg-dark); color: var(--text-light); }
        .section-dark h2, .section-dark h3 { color: white; }
        .fade-in-section { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .fade-in-section.visible { opacity: 1; transform: translateY(0); }
        .timeline-item::before {
            content: ''; position: absolute; left: -2.375rem; top: 50%; transform: translateY(-50%);
            width: 1.25rem; height: 1.25rem; border-radius: 50%; background-color: #dcd3c3;
            border: 3px solid var(--bg-light); transition: background-color 0.3s ease;
        }
        .timeline-item.active::before { background-color: var(--accent); }
        .book-card { transition: transform 0.3s ease, box-shadow 0.3s ease; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .book-card:hover { transform: translateY(-8px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
        .gemini-btn { background-color: var(--primary); color: white; transition: background-color 0.3s ease, transform 0.2s ease; }
        .gemini-btn:hover { background-color: #a0522d; transform: scale(1.05); }
        .typing-indicator { display: flex; align-items: center; }
        .typing-indicator span {
            height: 8px; width: 8px; margin: 0 2px; background-color: #9ca3af;
            border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-of-type(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-of-type(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .loader { border: 4px solid #e5e7eb; border-top: 4px solid var(--primary); border-radius: 50%; width: 32px; height: 32px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .modal-overlay { transition: opacity 0.3s ease-in-out; }
        .modal-content { transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; }
        #ask-ross-input { color: var(--primary); font-weight: 600; }
        #ask-ross-input::placeholder { color: var(--accent); opacity: 0.8; font-weight: 400; }
        
        #splash-screen { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background-color: var(--bg-dark); z-index: 100; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: opacity 0.7s ease-in-out; opacity: 1; }
        #splash-screen.hidden { opacity: 0; pointer-events: none; }
        #main-content { opacity: 0; transition: opacity 0.7s ease-in-out; }
        #main-content.visible { opacity: 1; }

        /* RE-ENGINEERED ANT Map Styles */
        .ant-container { min-height: 80vh; }
        .ant-map-wrapper { position: relative; width: 100%; max-width: 500px; aspect-ratio: 1 / 1; }
        .ant-node { position: absolute; transform: translate(-50%, -50%); transition: all 0.3s ease-in-out; }
        .ant-node-center { width: 25%; height: 25%; z-index: 10; }
        .ant-node-orbit { width: 20%; height: 20%; z-index: 5; cursor: pointer; }
        .ant-node img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 4px solid var(--bg-dark); box-shadow: 0 0 15px rgba(0,0,0,0.5); transition: border-color 0.3s ease; }
        .ant-node-orbit:hover { transform: translate(-50%, -50%) scale(1.1); z-index: 15; }
        .ant-node-orbit.active { transform: translate(-50%, -50%) scale(1.15); z-index: 20; }
        .ant-node-orbit.active img { border-color: var(--accent); box-shadow: 0 0 25px rgba(176, 137, 104, 0.7); }
        .ant-lines svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: visible; z-index: 1; }
        .ant-lines line { stroke: rgba(176, 137, 104, 0.3); stroke-width: 2px; transition: all 0.3s ease-in-out; }
        .ant-lines line.active { stroke: var(--accent); stroke-width: 4px; }
        .ant-info-panel { opacity: 0; transform: translateY(10px) scale(0.98); transition: all 0.4s ease-in-out; pointer-events: none; }
        .ant-info-panel.active { opacity: 1; transform: translateY(0) scale(1); pointer-events: auto; }
        .ant-tooltip {
            position: absolute; bottom: 105%; left: 50%; transform: translateX(-50%);
            background-color: var(--bg-light); color: var(--primary); padding: 4px 12px;
            border-radius: 6px; font-size: 0.875rem; font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2); white-space: nowrap;
            opacity: 0; transition: opacity 0.2s ease; pointer-events: none; z-index: 25;
        }
        .ant-node-orbit:hover .ant-tooltip { opacity: 1; }
    </style>
</head>
<body class="antialiased">
    
    <div id="splash-screen">
        <div class="text-center p-8 text-white">
            <h1 class="text-4xl md:text-6xl font-serif mb-4">Ronald Ross: From Observation to Revelation</h1>
            <p class="text-xl md:text-2xl text-gray-300 mb-8">A Project by Group-17 | HM216</p>
            <div class="text-sm text-gray-400 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-x-6 gap-y-3 max-w-5xl mx-auto mb-12">
                <p>Vivek Amipara - 202401013</p>
                <p>Het Bhungaliya - 202401033</p>
                <p>Nisarg Patel - 202403033</p>
                <p>Keval Darji - 202401043</p>
                <p>Prajapati Het - 202401162</p>
                <p>Shyam Bhuava - 202401034</p>
                <p>Gabani Yug - 202401054</p>
                <p>Bhavasar Dev - 202401031</p>
                <p>Babariya Urvish - 202401020</p>
                <p>Modiya Krish - 202401120</p>
            </div>
            <button id="enter-site-btn" class="bg-[var(--accent)] text-white font-bold py-3 px-10 rounded-full uppercase tracking-wider hover:bg-[#c99e7b] transition-all duration-300 transform hover:scale-105">
                Explore the Journey
            </button>
        </div>
    </div>

    <div id="main-content">
        <header class="glass-header sticky top-0 z-50">
            <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-16">
                    <div class="flex-shrink-0">
                        <h1 class="text-xl font-bold font-serif text-gray-800">Ronald Ross</h1>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-8">
                            <a href="#bio" class="nav-link px-1 py-2 text-sm font-bold uppercase tracking-wider text-gray-600">The Pioneer</a>
                            <a href="#sts" class="nav-link px-1 py-2 text-sm font-bold uppercase tracking-wider text-gray-600">The Network</a>
                            <a href="#ask" class="nav-link px-1 py-2 text-sm font-bold uppercase tracking-wider text-gray-600">Engage</a>
                            <a href="#bookshelf" class="nav-link px-1 py-2 text-sm font-bold uppercase tracking-wider text-gray-600">Bookshelf</a>
                        </div>
                    </div>
                    <div class="md:hidden">
                        <select id="mobile-nav" class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-amber-500 focus:border-amber-500 block w-full p-2.5">
                            <option value="#hero">Home</option>
                            <option value="#bio">The Pioneer</option>
                            <option value="#sts">The Network</option>
                            <option value="#ask">Engage</option>
                            <option value="#bookshelf">Bookshelf</option>
                        </select>
                    </div>
                </div>
            </nav>
        </header>

        <main>
            <section id="hero" class="hero h-screen flex flex-col justify-center items-center text-white text-center p-4">
                <h1 class="text-5xl md:text-7xl font-bold font-serif mb-4 leading-tight">Ronald Ross: From Observation to Revelation</h1>
                <p class="text-lg md:text-xl max-w-3xl mb-2">Sir Ronald Ross didn't just find a parasite. He redrew the map of global health.</p>
                <p class="text-lg md:text-xl max-w-3xl mb-8 font-bold">A Project by Group-17 | HM216</p>
                <a href="#bio" class="bg-white text-gray-800 font-bold py-3 px-8 rounded-full uppercase tracking-wider hover:bg-gray-200 transition-all duration-300">Explore the Journey</a>
            </section>
            
            <div id="bio" class="py-20 md:py-28 scroll-mt-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 fade-in-section">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold font-serif text-center mb-2 text-[var(--primary)]">The Reluctant Physician</h2>
                        <p class="text-center max-w-3xl mx-auto text-lg text-gray-700">He was a poet and an artist at heart, but duty called him to medicine. Ronald Ross joined the Indian Medical Service (IMS) to fulfill his father's plan, famously lamenting, "The money which my parents spent on my education was largely wasted." Yet, it was in India that he carved out his own destiny, finding a new calling in the relentless pursuit of a truth that would change the world.</p>
                    </div>
                
                    <div class="flex flex-col md:flex-row gap-8 lg:gap-16 items-center">
                        <div class="md:w-2/5">
                            <div class="relative pl-10 border-l-2 border-dashed border-gray-300">
                                <div id="timeline-item-1895" class="timeline-item relative mb-8 pl-8 cursor-pointer" onclick="updateTimelineInfo('1895')">
                                    <h3 class="font-bold text-lg">1895: The Turning Point</h3>
                                    <p class="text-sm text-gray-600">A fateful meeting with Sir Patrick Manson introduced Ross to the radical mosquito-malaria theory, igniting his scientific curiosity and giving his career a new direction.</p>
                                </div>
                                <div id="timeline-item-1897" class="timeline-item relative mb-8 pl-8 cursor-pointer" onclick="updateTimelineInfo('1897')">
                                    <h3 class="font-bold text-lg">1897: "Mosquito Day"</h3>
                                    <p class="text-sm text-gray-600">After years of painstaking work, he discovered the malaria parasite within the Anopheles mosquito, a breakthrough moment in his relentless pursuit of the truth.</p>
                                </div>
                                <div id="timeline-item-1902" class="timeline-item relative mb-8 pl-8 cursor-pointer" onclick="updateTimelineInfo('1902')">
                                    <h3 class="font-bold text-lg">1902: Global Recognition</h3>
                                    <p class="text-sm text-gray-600">For his tireless work and revolutionary discovery, he was awarded the Nobel Prize in Physiology or Medicine, cementing his place in history.</p>
                                </div>
                            </div>
                        </div>
                        <div class="md:w-3/5 bg-white rounded-lg p-8 shadow-xl text-center md:text-left">
                            <img src="ronald-image.jpg" alt="Portrait of Sir Ronald Ross" class="w-32 h-32 rounded-full mx-auto md:mx-0 md:float-left md:mr-6 mb-4 object-cover ring-4 ring-white">
                            <h3 id="timeline-title" class="text-2xl font-bold font-serif mb-4 text-[var(--primary)]">The Discovery of a Lifetime</h3>
                            <p id="timeline-text" class="text-gray-700 leading-relaxed">From an ordinary man to a Nobel laureate—a doctor, mathematician, and poet—he dedicated his life to the noble work of healing. Click a date to explore his journey.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="sts" class="section-dark py-20 md:py-28 scroll-mt-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 fade-in-section">
                    <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold font-serif mb-2 text-white">The Network of Discovery</h2>
                        <p class="text-center max-w-3xl mx-auto text-lg text-gray-300">A breakthrough is never the work of one person. It's the result of a powerful network of people, places, and even non-human actors. Explore the key players in the network that Ronald Ross assembled to solve the malaria puzzle.</p>
                    </div>

                    <div class="ant-container flex flex-col lg:flex-row items-center justify-center gap-8">
                        <div id="ant-map-container" class="ant-map-wrapper">
                            <div class="ant-lines">
                                <svg viewbox="0 0 100 100"></svg>
                            </div>
                        </div>
                        <div id="ant-info-container" class="w-full lg:w-1/3 text-center lg:text-left">
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="impact" class="py-20 md:py-28">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 fade-in-section">
                    <div class="text-center mb-16">
                         <h2 class="text-4xl font-bold font-serif text-center mb-2 text-[var(--primary)]">A Global Health Revolution</h2>
                         <p class="text-center max-w-3xl mx-auto text-lg text-gray-700">After his discovery, Ross became a leading consultant for public health. He proposed organized malaria control programs for military camps and railway projects, and his expertise guided policies from West Africa to Ismailia, reshaping public health forever.</p>
                    </div>
                    <div class="bg-white p-6 rounded-lg shadow-xl">
                        <div class="chart-container" style="height: 40vh; max-height: 450px;">
                            <canvas id="impactChart"></canvas>
                        </div>
                        <p class="text-center text-sm text-gray-500 mt-4">Conceptual graph illustrating the typical, dramatic decline in malaria mortality seen in campaigns like the Panama Canal project, which were made possible by Ross's discovery.</p>
                    </div>
                </div>
            </div>
            
            <div id="ask" class="py-20 md:py-28 scroll-mt-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 fade-in-section">
                    <div class="text-center mb-12">
                        <h2 class="text-4xl font-bold font-serif mb-2 text-[var(--primary)]">Engage with History</h2>
                        <p class="text-center max-w-2xl mx-auto text-lg text-gray-700">History has questions. Now, it can answer. What would you ask the man who solved the malaria puzzle? Pose a question and receive a response powered by our AI.</p>
                    </div>
                    <div class="max-w-2xl mx-auto bg-white p-8 rounded-lg shadow-xl">
                        <div class="flex flex-col sm:flex-row gap-4">
                            <input type="text" id="ask-ross-input" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--primary)] focus:border-transparent transition" placeholder="e.g., What was your greatest challenge?">
                            <button id="ask-ross-btn" class="gemini-btn px-8 py-3 rounded-lg font-bold">Ask Ross</button>
                        </div>
                        <div id="ask-ross-response" class="mt-6 p-6 bg-gray-50 rounded-lg min-h-[120px] text-gray-700 italic border border-gray-200 leading-relaxed">
                            Your question awaits an answer from the past...
                        </div>
                    </div>
                </div>
            </div>

            <div id="bookshelf" class="section-dark py-20 md:py-28 scroll-mt-16">
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 fade-in-section">
                     <div class="text-center mb-16">
                        <h2 class="text-4xl font-bold font-serif mb-2 text-white">The Bookshelf: Further Reading</h2>
                        <p class="text-center max-w-3xl mx-auto text-lg text-gray-300">To delve deeper into the world of Ronald Ross, explore these readings. Get a quick overview with an AI-powered summary for each book.</p>
                    </div>
                    <div class="flex justify-center flex-wrap gap-3 mb-10">
                        <button class="filter-btn active px-4 py-2 bg-gray-700/50 text-white rounded-full text-sm font-bold border border-[var(--border-color)]" data-filter="all">All</button>
                        <button class="filter-btn px-4 py-2 bg-gray-700/50 text-white rounded-full text-sm font-bold border border-[var(--border-color)]" data-filter="primary">By Ross</button>
                        <button class="filter-btn px-4 py-2 bg-gray-700/50 text-white rounded-full text-sm font-bold border border-[var(--border-color)]" data-filter="context">Historical Context</button>
                        <button class="filter-btn px-4 py-2 bg-gray-700/50 text-white rounded-full text-sm font-bold border border-[var(--border-color)]" data-filter="impact">Societal Impact</button>
                    </div>
                    <div id="book-grid" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
                        <div class="book-card flex flex-col justify-between bg-gray-800/50 rounded-lg p-6 border border-[var(--border-color)]" data-category="primary" data-title="Memoirs" data-author="Ronald Ross">
                            <div>
                                <h3 class="font-bold text-lg text-[var(--accent)] font-serif">Memoirs</h3>
                                <p class="text-sm font-semibold mb-2 text-gray-300">By Ronald Ross</p>
                                <p class="text-sm text-gray-400">The essential primary source. Ross details his scientific struggles, frustrations, and his broad views on the role of science in improving the human condition.</p>
                            </div>
                            <button class="summary-btn mt-6 gemini-btn text-sm font-bold py-2 px-4 rounded-lg w-full">✨ Get AI Summary</button>
                        </div>
                         <div class="book-card flex flex-col justify-between bg-gray-800/50 rounded-lg p-6 border border-[var(--border-color)]" data-category="context" data-title="Colonizing the Body" data-author="David Arnold">
                            <div>
                                <h3 class="font-bold text-lg text-[var(--accent)] font-serif">Colonizing the Body</h3>
                                <p class="text-sm font-semibold mb-2 text-gray-300">By David Arnold</p>
                                <p class="text-sm text-gray-400">Examines how state medicine and public health initiatives were implemented in 19th-century India within the framework of colonial governance.</p>
                            </div>
                            <button class="summary-btn mt-6 gemini-btn text-sm font-bold py-2 px-4 rounded-lg w-full">✨ Get AI Summary</button>
                        </div>
                        <div class="book-card flex flex-col justify-between bg-gray-800/50 rounded-lg p-6 border border-[var(--border-color)]" data-category="context" data-title="Public Health in British India" data-author="Mark Harrison">
                            <div>
                                <h3 class="font-bold text-lg text-[var(--accent)] font-serif">Public Health in British India</h3>
                                <p class="text-sm font-semibold mb-2 text-gray-300">By Mark Harrison</p>
                                <p class="text-sm text-gray-400">Details Anglo-Indian preventive medicine, crucial for understanding the administrative and ideological context in which Ross operated.</p>
                            </div>
                            <button class="summary-btn mt-6 gemini-btn text-sm font-bold py-2 px-4 rounded-lg w-full">✨ Get AI Summary</button>
                        </div>
                        <div class="book-card flex flex-col justify-between bg-gray-800/50 rounded-lg p-6 border border-[var(--border-color)]" data-category="impact" data-title="The Western Medical Tradition, 1800-2000" data-author="W.F. Bynum, et al.">
                            <div>
                                <h3 class="font-bold text-lg text-[var(--accent)] font-serif">The Western Medical Tradition</h3>
                                <p class="text-sm font-semibold mb-2 text-gray-300">By W.F. Bynum, et al.</p>
                                <p class="text-sm text-gray-400">Places Ross's discovery within the broader narrative of Western medicine, showing how germ theory created the conditions for his breakthrough.</p>
                            </div>
                            <button class="summary-btn mt-6 gemini-btn text-sm font-bold py-2 px-4 rounded-lg w-full">✨ Get AI Summary</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer class="bg-gray-800 pt-16 pb-12">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-400">
                <p class="text-lg font-serif text-white mb-4">A Project by Group-17 for HM216</p>
                <p class="mt-8 text-xs text-gray-600">&copy; 2025. This project is for educational purposes.</p>
            </div>
        </footer>

        <div id="summary-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75 modal-overlay opacity-0 pointer-events-none">
            <div class="bg-white rounded-lg shadow-xl w-11/12 max-w-2xl p-8 modal-content transform scale-95 opacity-0">
                <div class="flex justify-between items-center mb-4">
                    <h3 id="modal-title" class="text-2xl font-bold font-serif text-[var(--primary)]">AI-Generated Summary</h3>
                    <button id="close-modal-btn" class="text-gray-400 hover:text-gray-800 text-3xl">&times;</button>
                </div>
                <div id="modal-body" class="text-gray-700 leading-relaxed">
                    <div class="flex justify-center items-center h-32">
                        <div class="loader"></div>
                    </div>
                </div>
            </div>
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Splash Screen Logic
            const splashScreen = document.getElementById('splash-screen');
            const enterSiteBtn = document.getElementById('enter-site-btn');
            const mainContent = document.getElementById('main-content');
            enterSiteBtn.addEventListener('click', () => {
                splashScreen.classList.add('hidden');
                document.body.style.overflow = 'auto';
                mainContent.classList.add('visible');
                setTimeout(() => { splashScreen.style.display = 'none'; }, 700);
            });

            const timelineData = {
                '1895': { title: 'A Fateful Encounter', text: 'A pivotal meeting with Sir Patrick Manson introduced Ross to the then-radical theory that mosquitoes transmitted malaria. This encounter ignited a passion and set him on his path of discovery.' },
                '1897': { title: 'August 20th: "Mosquito Day"', text: 'After years of relentless work, Ross finally identified the malaria parasite within the stomach of an Anopheles mosquito. He knew he had found the vector, a moment of pure revelation.' },
                '1902': { title: 'Global Recognition', text: 'For his discovery, Ross was awarded the Nobel Prize. His work provided the scientific foundation for all modern anti-malarial strategies, shifting the focus to vector control.' }
            };
            window.updateTimelineInfo = (year) => {
                document.getElementById('timeline-title').innerText = timelineData[year].title;
                document.getElementById('timeline-text').innerText = timelineData[year].text;
                document.querySelectorAll('.timeline-item').forEach(item => item.classList.remove('active'));
                document.getElementById(`timeline-item-${year}`).classList.add('active');
            };
            updateTimelineInfo('1897');

            const filterBtns = document.querySelectorAll('.filter-btn');
            const bookCards = document.querySelectorAll('.book-card');
            filterBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelector('.filter-btn.active')?.classList.remove('active', 'bg-[var(--accent)]', 'text-black');
                    btn.classList.add('active', 'bg-[var(--accent)]', 'text-black');
                    const filter = btn.dataset.filter;
                    bookCards.forEach(card => card.style.display = (filter === 'all' || card.dataset.category.includes(filter)) ? 'flex' : 'none');
                });
            });
            filterBtns[0].classList.add('active', 'bg-[var(--accent)]', 'text-black');

            const ctx = document.getElementById('impactChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar', data: { labels: ['Pre-Intervention', 'Year 1', 'Year 5', 'Year 10', 'Year 20'], datasets: [{ label: 'Malaria Mortality Rate (per 100,000)', data: [450, 310, 150, 60, 25], backgroundColor: 'rgba(139, 69, 19, 0.6)', borderColor: 'rgba(139, 69, 19, 1)', borderWidth: 1, borderRadius: 4 }] },
                options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true, title: { display: true, text: 'Deaths per 100,000 Population', font: { family: "'Lato', sans-serif"}}, ticks: { color: '#6b7280' }, grid: { color: '#e5e7eb' } }, x: { title: { display: true, text: 'Years After Mosquito Control Implementation', font: { family: "'Lato', sans-serif"}}, ticks: { color: '#6b7280' }, grid: { display: false } } } }
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main section, main div[id]');
            const observerOptions = { root: null, rootMargin: '0px', threshold: 0.4 };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const id = entry.target.getAttribute('id');
                        navLinks.forEach(link => { link.classList.toggle('active', link.getAttribute('href') === `#${id}`); });
                    }
                });
            }, observerOptions);
            sections.forEach(section => observer.observe(section));
            
            const faders = document.querySelectorAll('.fade-in-section');
            const appearOptions = { threshold: 0.15, rootMargin: "0px 0px -100px 0px"};
            const appearOnScroll = new IntersectionObserver(function(entries, appearOnScroll) {
                entries.forEach(entry => { if (!entry.isIntersecting) return; entry.target.classList.add('visible'); appearOnScroll.unobserve(entry.target); });
            }, appearOptions);
            faders.forEach(fader => appearOnScroll.observe(fader));

            document.getElementById('mobile-nav').addEventListener('change', (e) => window.location.hash = e.target.value);

            async function callSecureApi(payload) { /* ... same as before ... */ }
            const askRossBtn = document.getElementById('ask-ross-btn');
            // ... askRoss logic is the same ...
            
            const summaryModal = document.getElementById('summary-modal');
            // ... modal logic is the same ...
            
            // Re-engineered ANT Map Logic
            const antMapContainer = document.getElementById('ant-map-container');
            const antInfoContainer = document.getElementById('ant-info-container');
            const svgLinesContainer = antMapContainer.querySelector('.ant-lines svg');
            const actors = [
                { id: 'spm', name: 'Sir Patrick Manson', img: 'SPM.jpg', info: 'The Mentor. Manson provided the foundational mosquito-malaria theory that guided Ross, acting as a crucial intellectual anchor for the entire project.' },
                { id: 'pdm', name: 'Plasmodium Parasite', img: 'PDM.png', info: 'The Culprit. The microscopic, non-human actor at the heart of the mystery. Ross had to make this invisible agent visible to the scientific world.' },
                { id: 'am', name: 'Anopheles Mosquito', img: 'AM.png', info: 'The Vector. The essential intermediary. Ross proved this specific mosquito was not just a nuisance but the biological vehicle for the parasite.' },
                { id: 'cl', name: 'Calcutta Lab & Assistants', img: 'CL.jpg', info: 'The Workspace. The laboratory, along with his unnamed Indian assistants, formed the critical infrastructure where theories were tested and proof was generated.' },
                { id: 'hc', name: 'Hospital Camps', img: 'HC.jpg', info: 'The Proving Ground. The camps provided the human subjects and the raw data—the malaria crisis itself—that fueled the urgency and provided the material for the research.' },
                { id: 'mp', name: 'Microscope', img: 'MP.jpg', info: 'The Technology. The key instrument that made the invisible visible. Without this technoscientific actor, the parasite would have remained undiscovered.' },
            ];
            const centerNode = { id: 'rr', name: 'Ronald Ross', img: 'RR.png' };
            const centerDiv = document.createElement('div');
            centerDiv.className = 'ant-node ant-node-center';
            centerDiv.style.left = '50%'; centerDiv.style.top = '50%';
            centerDiv.innerHTML = `<img src="${centerNode.img}" alt="${centerNode.name}">`;
            antMapContainer.appendChild(centerDiv);
            actors.forEach((actor, index) => {
                const angle = (Math.PI / 3) * index - (Math.PI / 6);
                const radius = 40;
                const x = 50 + radius * Math.cos(angle);
                const y = 50 + radius * Math.sin(angle);
                const nodeDiv = document.createElement('div');
                nodeDiv.className = 'ant-node ant-node-orbit';
                nodeDiv.style.left = `${x}%`; nodeDiv.style.top = `${y}%`;
                nodeDiv.dataset.index = index;
                nodeDiv.innerHTML = `<img src="${actor.img}" alt="${actor.name}"><div class="ant-tooltip">${actor.name}</div>`;
                antMapContainer.appendChild(nodeDiv);
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', '50%'); line.setAttribute('y1', '50%');
                line.setAttribute('x2', `${x}%`); line.setAttribute('y2', `${y}%`);
                line.dataset.index = index;
                svgLinesContainer.appendChild(line);
                const infoDiv = document.createElement('div');
                infoDiv.className = 'ant-info-panel absolute top-0 left-0 w-full h-full flex flex-col justify-center';
                infoDiv.dataset.index = index;
                infoDiv.innerHTML = ` <div class="flex items-center mb-4"> <img src="${actor.img}" alt="${actor.name}" class="w-16 h-16 rounded-full mr-4 border-2 border-[var(--accent)]"> <div> <h3 class="font-bold text-xl text-[var(--accent)] font-serif">${actor.name}</h3></div> </div> <p class="text-gray-300 leading-relaxed">${actor.info}</p> `;
                antInfoContainer.appendChild(infoDiv);
            });
            antMapContainer.addEventListener('click', (e) => {
                const node = e.target.closest('.ant-node-orbit');
                if (!node) return;
                const index = node.dataset.index;
                const alreadyActive = node.classList.contains('active');
                antMapContainer.querySelectorAll('.ant-node-orbit, .ant-lines line, .ant-info-panel').forEach(el => el.classList.remove('active'));
                if (!alreadyActive) {
                    node.classList.add('active');
                    antMapContainer.querySelector(`.ant-lines line[data-index='${index}']`).classList.add('active');
                    antInfoContainer.querySelector(`.ant-info-panel[data-index='${index}']`).classList.add('active');
                }
            });
            setTimeout(() => {
                 antMapContainer.querySelector('.ant-node-orbit[data-index="0"]')?.click();
            }, 500); // Slight delay for smoother initial load
        });
    </script>
</body>
</html>

